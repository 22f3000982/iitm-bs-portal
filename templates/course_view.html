<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
    <style>
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-around;
                text-align: center;
            }

            .sidebar a, .sidebar form {
                width: 100%;
                margin: 5px 0;
            }

            .navbar {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px;
            }

            .navbar-buttons {
                display: flex;
                flex-direction: column;
                width: 100%;
            }

            .nav-btn {
                width: 100%;
                margin: 5px 0;
            }

            .global-search {
                width: 100%;
                margin-bottom: 10px;
            }

            .main-content {
                margin-left: 0;
                padding: 10px;
            }

            .course-grid {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            .course-card {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <h2>Dashboard</h2>
        <a href="{{ url_for('course_view') }}">üìö Courses</a>
        <a href="#">üìû Contact Us</a>
        <a href="#">‚ÑπÔ∏è About Admin</a>
        <a href="#">‚öôÔ∏è Settings</a>

        {% if not admin_mode %}
            <!-- Admin Login Form in Sidebar -->
            <form class="admin-login-form" action="{{ url_for('admin_login') }}" method="post">
                <input class="password-input" type="password" name="password" placeholder="Admin Password" required>
                <button class="btn login-btn" type="submit">Login</button>
            </form>
        {% else %}
            <a href="{{ url_for('admin_add_course') }}">‚ûï Add Course</a>
            <a href="{{ url_for('admin_logout') }}">üö™ Exit Admin</a>
        {% endif %}
    </div>

    <!-- Top Navbar -->
    <div class="navbar">
        <input type="text" id="globalSearch" class="global-search" placeholder="Search Course...">
        <div class="navbar-buttons">
            <button class="nav-btn">üîî Notifications</button>
            <button class="nav-btn">‚ûï Add New</button>
            <button class="nav-btn">üë§ Profile</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <h1 class="page-title">Available Courses</h1>

            {% if courses %}
            <div class="course-grid" id="courseList">
                {% for course in courses %}
                    <div class="course-card course-item">
                        <a class="course-link" href="{{ url_for('course_detail', course_id=course[0]) }}">{{ course[1] }}</a>
                        {% if admin_mode %}
                            <div class="admin-actions">
                                <a class="edit-link" href="{{ url_for('admin_edit_course', course_id=course[0]) }}">Edit</a>
                                |
                                <a class="delete-link" href="{{ url_for('admin_delete_course', course_id=course[0]) }}">Delete</a>
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
            {% else %}
                <p class="no-courses">No courses available.</p>
            {% endif %}
        </div>
    </div>

<script>
    // Global Search Function
    const searchInput = document.getElementById('globalSearch');
    const courseList = document.getElementById('courseList');
    const courses = courseList.getElementsByClassName('course-item');

    searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase();
        for (let course of courses) {
            const title = course.innerText.toLowerCase();
            course.style.display = title.includes(query) ? 'flex' : 'none';
        }
    });
</script>

</body>
</html>
